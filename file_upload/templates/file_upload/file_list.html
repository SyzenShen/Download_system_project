{% extends "file_upload/base.html" %}

{% block content %}
<h3>File List</h3>
{% if files %}
<table class="table table-striped">

    <tbody>
    <tr>
        <td>Filename & URL</td>
        <td>Filesize</td>
        <td>Upload Method</td>
    </tr>
    {% for file in files %}
    <tr>
        <!-- Display the original filename and use the ID-based download route to avoid leaking paths -->
        <td>
            <a href="{% url 'file_download:file_download_by_id' file.id %}">
                {{ file.original_filename|default:file.file.name }}
            </a>
        </td>
        <td>{{ file.file.size | filesizeformat }}</td>
        <td>{{ file.upload_method }}</td>
    </tr>
    {% endfor %}
    </tbody>
</table>

{% else %}
<p>No files uploaded yet.</p>
{% endif %}

{% endblock %}
